---
layout: layouts/base.njk
title: "Blog"
# permalink: "/blog/"

# Pagination settings
pagination:
  data: collections.blog # source collection
  size: 6 # posts per page
  alias: posts # variable name inside template
  reverse: true # newest first

permalink: "/blog/{% if pagination.pageNumber > 0 %}page/{{ pagination.pageNumber + 1 }}/{% endif %}index.html"

eleventyExcludeFromCollections: true
---

{# Hero banner: pick first featured post on first page #}
{% if pagination.pageNumber == 0 %}
{% set hero = collections.blog | where("data.featured", true) | first %}
{% if hero %}

<section class="py-5 text-white" style="background:url('{{ hero.data.image }}') no-repeat center/cover;">
  <div class="container py-5">
    <h1 class="display-5 fw-bold">{{ hero.data.title }}</h1>
    <p class="lead">{{ hero.data.description }}</p>
    <a href="{{ hero.url }}" class="btn btn-light">Read&nbsp;More</a>
  </div>
</section>
  {% endif %}
{% endif %}

<section class="py-5">
  <div class="container">
    {% if pagination.pageNumber == 0 and hero %}
      <h2 class="mb-4">More&nbsp;Posts</h2>
    {% else %}
      <h1 class="mb-4">Blog</h1>
    {% endif %}

    <div class="row g-4">
      {% for post in posts %}
        {% if not (hero and post.url == hero.url) %}
          <div class="col-12 col-md-6 col-lg-4">
            <article class="card h-100 shadow-sm">
              {% if post.data.image %}
                <img src="{{ post.data.image }}" class="card-img-top" alt="">
              {% endif %}
              <div class="card-body d-flex flex-column">
                <h5 class="card-title">
                  <a href="{{ post.url }}" class="stretched-link text-decoration-none">
                    {{ post.data.title }}
                  </a>
                </h5>
                <p class="text-muted small mb-2">{{ post.date | date("dd LLL yyyy") }}</p>
                <p class="card-text small mb-4">
                  {{ post.data.description
                      or (post.templateContent | striptags | truncate(160, "…")) }}
                </p>
              </div>
            </article>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    {# ❸ Pagination nav #}
    <nav class="d-flex justify-content-between mt-5" aria-label="Blog pagination">
      {% if pagination.href.previous %}
        <a class="btn btn-outline-primary" href="{{ pagination.href.previous }}">&laquo;&nbsp;Newer</a>
      {% else %}
        <span></span>
      {% endif %}
      {% if pagination.href.next %}
        <a class="btn btn-outline-primary" href="{{ pagination.href.next }}">Older&nbsp;&raquo;</a>
      {% endif %}
    </nav>

  </div>
</section>
